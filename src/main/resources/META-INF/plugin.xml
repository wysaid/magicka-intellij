<idea-plugin require-restart="false">
    <id>com.kwai.magicka</id>
    <name>Magicka</name>
    <!-- Version number is automatically injected by Gradle during build -->
    <vendor email="wangyang@kuaishou.com" url="https://github.com/wysaid/magicka-intellij">Kuaishou FaceMagic Team</vendor>
    
    <!-- Internationalization resource bundle -->
    <resource-bundle>messages.MagickaBundle</resource-bundle>
    
    <description>
        Magicka plugin for JetBrains IDEs, providing shader code generation and text processing tools for visual effects development.
    </description>
    
    <!-- Compatibility range: From build 233 (2023.3) onwards, continuously compatible with newer versions -->
    <idea-version since-build="233"/>
    
    <!-- Changelog injected by Gradle build from CHANGELOG.md -->
    
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Register notification group -->
        <notificationGroup id="Magicka Plugin Notifications" displayType="BALLOON" isLogByDefault="true"/>
    </extensions>

    <actions>
    <!-- Magicka menu group - displayed as a submenu option in the Tools menu -->
        <group id="org.magicka.MagickaOptionsGroup" 
               class="org.magicka.action.MagickaOptionsGroup"
               popup="true">
            
            <!-- Help/About Action -->
            <action id="org.magicka.HelpAction"
                    class="org.magicka.HelpAction"/>
            
            <!-- Add to Tools menu -->
            <add-to-group group-id="ToolsMenu" anchor="first"/>
        </group>
        
    <!-- Action for processing .sl.json files - added to editor context menu -->
        <action id="org.magicka.ProcessShaderJsonAction"
                class="org.magicka.action.ProcessShaderJsonAction">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="first"/>
            <!-- Keyboard shortcut: ctrl + alt + meta + L (mac: ctrl+cmd+alt+L, win: ctrl+win+alt+L) -->
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt meta L"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="ctrl alt meta L"/>
        </action>
    </actions>
</idea-plugin>
